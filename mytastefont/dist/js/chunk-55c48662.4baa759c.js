(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-55c48662"],{"0a38":function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-container",[o("el-header",[o("Header",{on:{user:t.getUser}})],1),o("el-main",[o("el-row",{attrs:{id:"summary"}},[o("el-col",{attrs:{span:18,offset:3}},[o("el-row",[o("el-col",{attrs:{span:24}},[o("h1",[t._v(t._s(t.hotel.name))])])],1),o("el-row",[o("el-col",{attrs:{span:20}},[o("span",[t._v(t._s(t.hotel.ename))]),o("span",{staticStyle:{"margin-left":"30px"}},[t._v(t._s(t.number2Grade(t.hotel.grade)))]),o("p",[t._v("周边："+t._s(t.hotel.around))])]),o("el-col",{attrs:{span:2}},[o("span",{staticStyle:{"font-size":"28px","font-weight":"bolder",color:"#2e6da4"}},[t._v(t._s(t.hotel.score)+"分")])]),o("el-col",{attrs:{span:2}},[o("p",[t._v("评论数"+t._s(t.hotel.comment_num))]),o("p",{staticStyle:{"margin-top":"-10px"}},[t._v(t._s(t.hotel.score_comment))])])],1),o("el-row",[o("img",{staticStyle:{width:"100%",height:"384px"},attrs:{src:t.hotel.main_photo,alt:""}})]),o("hr"),o("el-row",[o("el-link",{staticStyle:{"text-decoration":"none"},attrs:{type:"primary",href:"#summary"}},[t._v("概括")]),o("el-link",{staticStyle:{"margin-left":"50px","text-decoration":"none"},attrs:{type:"primary",href:"#comment"}},[t._v("评论 ")]),o("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"small"},on:{click:t.newComment}},[t._v(" 我要评论 ")])],1),o("hr"),o("el-row",[o("el-col",{attrs:{span:24}},[o("span",{staticStyle:{"font-size":"20px","margin-right":"100px"}},[t._v("基本信息")]),o("span",[t._v("入住时间: 14:00 - 00:00 离店时间: 12:00之前")])])],1),o("hr"),o("el-row",[o("el-col",{attrs:{span:24}},[o("span",{staticStyle:{"font-size":"20px","margin-right":"100px"}},[t._v("交通")]),o("span",[t._v(t._s(t.hotel.traffic))])])],1),o("hr"),o("el-row",[o("el-col",[o("h3",[t._v("房间详情")])])],1),t._l(t.rooms,(function(e,s){return o("el-row",{key:s,staticStyle:{"margin-top":"20px"}},[o("el-col",{attrs:{span:3}},[o("p",[o("span",[t._v("类型 ")]),o("span",{staticStyle:{"font-size":"18px",color:"#2aabd2"}},[t._v(t._s(e.room_type))])])]),o("el-col",{attrs:{span:3,offset:3}},[o("p",[o("span",[t._v("还有 ")]),o("span",{staticStyle:{"font-size":"18px",color:"#e38d13"}},[t._v(t._s(e.room_count))]),o("span",[t._v(" 间")])])]),o("el-col",{attrs:{span:3,offset:3}},[o("p",[o("span",[t._v("￥ ")]),o("span",{staticStyle:{"font-size":"18px",color:"#ac2925"}},[t._v(t._s(e.room_price))])])]),o("el-col",{attrs:{span:3,offset:3}},[o("el-button",{staticStyle:{"margin-top":"-5px"},attrs:{size:"small",type:"primary"},on:{click:function(o){return t.checkRoom(e.id)}}},[t._v(" 预订 ")])],1)],1)}))],2)],1),o("hr"),o("el-row",{attrs:{id:"comment"}},[o("el-col",{attrs:{span:18,offset:3}},[o("div",{staticClass:"rev-list"},[o("ul",{staticStyle:{"list-style":"none"}},t._l(t.comments,(function(e){return o("li",{key:e.id,staticClass:"rev-item comment-item clearfix"},[o("div",{staticClass:"user"},[o("router-link",{staticClass:"avatar",attrs:{to:"/user/1",target:"_blank"}},[o("img",{attrs:{src:t.mainPhotoSrc(e.user_info.avatar),width:"48",height:"48"}})])],1),o("router-link",{staticClass:"name",attrs:{to:"/user/1",target:"_blank"}},[t._v(" "+t._s(e.user_info.username)+" ")]),o("span",{staticClass:"s-star",class:t.score2Stars(e.score)}),o("p",{staticClass:"rev-txt"},[t._v(" "+t._s(e.content)+" ")]),o("div",{staticClass:"info clearfix"},[o("span",{staticClass:"time"},[t._v(t._s(e.created_time))])])],1)})),0)])])],1),o("el-pagination",{staticStyle:{"text-align":"center","margin-top":"20px","margin-bottom":"40px"},attrs:{background:"",layout:"prev, pager, next","page-size":t.pageSize,total:t.commentsCount},on:{"current-change":t.handleCurrentChange}}),o("el-dialog",{attrs:{title:"发布您的评论-"+t.hotel.name+"-景区",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[o("el-form",{attrs:{model:t.form}},[o("el-form-item",{attrs:{label:"评分","label-width":t.formLabelWidth}},[o("el-rate",{attrs:{colors:t.colors},model:{value:t.form.score,callback:function(e){t.$set(t.form,"score",e)},expression:"form.score"}})],1),o("el-form-item",{attrs:{label:"内容","label-width":t.formLabelWidth}},[o("el-input",{attrs:{type:"textarea",placeholder:"此处发表您的评论"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("确 定")])],1)],1)],1),o("el-footer",[o("Footer")],1)],1)},a=[],n=(o("99af"),o("9898")),r=o("3e61"),i={name:"Hotel",data:function(){return{uid:0,id:0,hotel:void 0,comments:[],pageSize:10,commentsCount:0,page:1,dialogFormVisible:!1,form:{score:0,content:""},formLabelWidth:"120px",colors:["#99A9BF","#F7BA2A","#FF9900"],rooms:[]}},computed:{mainPhotoSrc:function(){var t=this;return function(e){return"".concat(t.$settings.HOST).concat(e)}},score2Stars:function(){return function(t){var e="s-star0";switch(t){case 1:e="s-star1";break;case 2:e="s-star2";break;case 3:e="s-star3";break;case 4:e="s-star4";break;case 5:e="s-star5";break}return e}},number2Grade:function(){return function(t){var e="暂无评级";switch(t){case 2:e="一星级";break;case 3:e="二星级";break;case 4:e="三星级";break;case 5:e="四星级";break;case 6:e="五星级";break}return e}}},methods:{getUser:function(t){this.uid=t},getHotel:function(t){var e=this;this.$axios({url:"".concat(this.$settings.HOST,"/hotel/").concat(t,"/"),method:"GET"}).then((function(t){e.hotel=t.data})).catch((function(t){alert(t.response.data)}))},getHotelComments:function(t){var e=this;this.$axios({url:"".concat(this.$settings.HOST,"/hotel_comments/").concat(t,"/"),method:"GET",params:{page:this.page,page_size:this.pageSize}}).then((function(t){e.comments=t.data.results,e.commentsCount=t.data.count})).catch((function(t){alert(t.response)}))},getRooms:function(){var t=this;this.$axios({url:"".concat(this.$settings.HOST,"/rooms/"),method:"GET",params:{hotel:this.id}}).then((function(e){t.rooms=e.data})).catch((function(t){alert(t.response)}))},handleCurrentChange:function(t){this.page=t,location.href="#comment",this.getHotelComments(this.id)},openNeedLogin:function(){var t=this;this.$confirm("亲，发表评论需要登录哦, 前往登录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$router.push("/login")}))},checkRoom:function(t){var e=this;this.uid?this.$confirm("确定预定吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"primary"}).then((function(){e.$axios({url:"".concat(e.$settings.HOST,"/room/").concat(t,"/"),method:"PUT",data:{user:e.uid,hotel:e.id}}).then((function(t){e.$message.success("预订成功！"),e.getRooms()})).catch((function(t){console.log(t.response)}))})):this.openNeedLogin()},newComment:function(){this.uid?this.dialogFormVisible=!0:this.openNeedLogin()},onSubmit:function(){this.dialogFormVisible=!1,this.$axios({url:"".concat(this.$settings.HOST,"/hotel_comment/"),method:"POST",data:{user:this.uid,content:this.form.content,score:this.form.score,hotel:this.id}}).catch((function(t){alert("啊呀，出错啦！请重试!")})),this.form.score=0,this.form.content=""}},created:function(){this.id=this.$route.params.id,this.getHotel(this.id),this.getHotelComments(this.id),this.getRooms(this.id),this.getUser()},components:{Footer:r["default"],Header:n["default"]}},c=i,l=(o("6e2d"),o("2877")),m=Object(l["a"])(c,s,a,!1,null,"d5ec2636",null);e["default"]=m.exports},"6e2d":function(t,e,o){"use strict";var s=o("ec65"),a=o.n(s);a.a},ec65:function(t,e,o){}}]);
//# sourceMappingURL=chunk-55c48662.4baa759c.js.map